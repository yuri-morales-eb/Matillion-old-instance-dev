{"job":{"components":{"6342113":{"id":6342113,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":1716658327,"x":336,"y":144,"width":32,"height":32,"inputConnectorIDs":[6342121],"outputConnectorIDs":[6342119],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Deriving Branch Details"}}}},"visible":true},"2":{"slot":2,"name":"Include Input Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true},"3":{"slot":3,"name":"Calculations","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"CASE WHEN LEN(\"market\") = 0 AND \"MARKET_BY_AREA\" IS NOT NULL THEN \"MARKET_BY_AREA\" ELSE \"market\" END"},"2":{"slot":2,"type":"STRING","value":"MARKET_BY_AREA_DERIVED"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"CASE WHEN LEN(\"u_div\") = 0 AND \"DIVISION_NAME\" IS NOT NULL THEN \"DIVISION_NAME\" ELSE \"u_div\" END"},"2":{"slot":2,"type":"STRING","value":"DIVISION_NAME_DERIVED"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"CASE WHEN LEN(\"region\") = 0 AND \"REGION_NAME\" IS NOT NULL THEN \"REGION_NAME\" ELSE \"region\" END"},"2":{"slot":2,"type":"STRING","value":"REGION_NAME_DERIVED"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"CASE WHEN LEN(\"branch\") = 0 AND \"BRANCH_NAME\" IS NOT NULL THEN \"BRANCH_NAME\" ELSE \"branch\" END"},"2":{"slot":2,"type":"STRING","value":"BRANCH_NAME_DERIVED"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"CASE WHEN LEN(\"city\") = 0 AND \"BRANCH_CITY\" IS NOT NULL THEN \"BRANCH_CITY\" ELSE \"city\" END"},"2":{"slot":2,"type":"STRING","value":"CITY_NAME_DERIVED"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"6342114":{"id":6342114,"inputCardinality":"ONE","outputCardinality":"ZERO","implementationID":211954775,"x":544,"y":144,"width":32,"height":32,"inputConnectorIDs":[6342119],"outputConnectorIDs":[],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Load_SNOW_BILL_REPORT_MARKET_SHARE"}}}},"visible":true},"2":{"slot":2,"name":"Target Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"SNOW_BILL_REPORT_MARKET_SHARE"}}}},"visible":true},"4":{"slot":4,"name":"Column Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"sys_created_on"},"2":{"slot":2,"type":"STRING","value":"CREATED_ON"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"account_name"},"2":{"slot":2,"type":"STRING","value":"ACCOUNT_NAME"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"account_number"},"2":{"slot":2,"type":"STRING","value":"ACCOUNT_NUMBER"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"account_type"},"2":{"slot":2,"type":"STRING","value":"ACCOUNT_TYPE"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"BRANCH_NAME_DERIVED"},"2":{"slot":2,"type":"STRING","value":"BRANCH"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"DIVISION_NAME_DERIVED"},"2":{"slot":2,"type":"STRING","value":"DIVISION"}}},"7":{"slot":7,"values":{"1":{"slot":1,"type":"STRING","value":"REGION_NAME_DERIVED"},"2":{"slot":2,"type":"STRING","value":"REGION"}}},"8":{"slot":8,"values":{"1":{"slot":1,"type":"STRING","value":"MARKET_BY_AREA_DERIVED"},"2":{"slot":2,"type":"STRING","value":"MARKET_BY_AREA"}}},"9":{"slot":9,"values":{"1":{"slot":1,"type":"STRING","value":"CITY_NAME_DERIVED"},"2":{"slot":2,"type":"STRING","value":"CITY"}}},"10":{"slot":10,"values":{"1":{"slot":1,"type":"STRING","value":"eb_aoa_count"},"2":{"slot":2,"type":"STRING","value":"EB_AOA_COUNT"}}},"11":{"slot":11,"values":{"1":{"slot":1,"type":"STRING","value":"competitor_name"},"2":{"slot":2,"type":"STRING","value":"COMPETITOR_NAME"}}},"12":{"slot":12,"values":{"1":{"slot":1,"type":"STRING","value":"competitor_aoa_count"},"2":{"slot":2,"type":"STRING","value":"COMPETITOR_AOA_COUNT"}}},"13":{"slot":13,"values":{"1":{"slot":1,"type":"STRING","value":"sys_created_by"},"2":{"slot":2,"type":"STRING","value":"CREATED_BY"}}}},"visible":true},"5":{"slot":5,"name":"Truncate","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Truncate"}}}},"visible":true},"200":{"slot":200,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${SNFLSALSCH}"}}}},"visible":true},"201":{"slot":201,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${SNFLENTDB}"}}}},"visible":true},"202":{"slot":202,"name":"Warehouse","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true},"203":{"slot":203,"name":"Fix Data Type Mismatches","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true},"204":{"slot":204,"name":"Order By","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ACCOUNT_NAME"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"ACCOUNT_NUMBER"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"ACCOUNT_TYPE"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"BRANCH"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"DIVISION"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"REGION"}}},"7":{"slot":7,"values":{"1":{"slot":1,"type":"STRING","value":"MARKET_BY_AREA"}}},"8":{"slot":8,"values":{"1":{"slot":1,"type":"STRING","value":"CITY"}}},"9":{"slot":9,"values":{"1":{"slot":1,"type":"STRING","value":"EB_AOA_COUNT"}}},"10":{"slot":10,"values":{"1":{"slot":1,"type":"STRING","value":"COMPETITOR_NAME"}}},"11":{"slot":11,"values":{"1":{"slot":1,"type":"STRING","value":"COMPETITOR_AOA_COUNT"}}},"12":{"slot":12,"values":{"1":{"slot":1,"type":"STRING","value":"CREATED_BY"}}},"13":{"slot":13,"values":{"1":{"slot":1,"type":"STRING","value":"CREATED_ON"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"6342115":{"id":6342115,"inputCardinality":"ZERO","outputCardinality":"MANY","implementationID":1354890871,"x":0,"y":144,"width":32,"height":32,"inputConnectorIDs":[],"outputConnectorIDs":[6342120],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"LDG_SNOW_BILL_REPORT_MARKET_SHARE"}}}},"visible":true},"2":{"slot":2,"name":"Target Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"LDG_SNOW_BILL_REPORT_MARKET_SHARE"}}}},"visible":true},"3":{"slot":3,"name":"Column Names","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"sys_created_by"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"sys_created_on"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"sys_id"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"sys_tags"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"total"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"account_number"}}},"7":{"slot":7,"values":{"1":{"slot":1,"type":"STRING","value":"account_name"}}},"8":{"slot":8,"values":{"1":{"slot":1,"type":"STRING","value":"comp_aoa"}}},"9":{"slot":9,"values":{"1":{"slot":1,"type":"STRING","value":"u_mrkt_share_sys_id"}}},"10":{"slot":10,"values":{"1":{"slot":1,"type":"STRING","value":"u_div"}}},"11":{"slot":11,"values":{"1":{"slot":1,"type":"STRING","value":"eb_aoa_count"}}},"12":{"slot":12,"values":{"1":{"slot":1,"type":"STRING","value":"city"}}},"13":{"slot":13,"values":{"1":{"slot":1,"type":"STRING","value":"region"}}},"14":{"slot":14,"values":{"1":{"slot":1,"type":"STRING","value":"sys_updated_on"}}},"15":{"slot":15,"values":{"1":{"slot":1,"type":"STRING","value":"market"}}},"16":{"slot":16,"values":{"1":{"slot":1,"type":"STRING","value":"competitor_name"}}},"17":{"slot":17,"values":{"1":{"slot":1,"type":"STRING","value":"sys_mod_count"}}},"18":{"slot":18,"values":{"1":{"slot":1,"type":"STRING","value":"sys_updated_by"}}},"19":{"slot":19,"values":{"1":{"slot":1,"type":"STRING","value":"competitor_aoa_count"}}},"20":{"slot":20,"values":{"1":{"slot":1,"type":"STRING","value":"area"}}},"21":{"slot":21,"values":{"1":{"slot":1,"type":"STRING","value":"account_type"}}},"22":{"slot":22,"values":{"1":{"slot":1,"type":"STRING","value":"branch"}}}},"visible":true},"5":{"slot":5,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${SNFLSALSCH}"}}}},"visible":true},"6":{"slot":6,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${SNFLENTDB}"}}}},"visible":true},"7":{"slot":7,"name":"Offset","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":""}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"6342116":{"id":6342116,"inputCardinality":"ZERO_OR_MANY","outputCardinality":"MANY","implementationID":-1266674941,"x":192,"y":32,"width":32,"height":32,"inputConnectorIDs":[],"outputConnectorIDs":[6342118],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"EDW Branch Details"}}}},"visible":true},"2":{"slot":2,"name":"SQL Query","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"SELECT DISTINCT TO_CHAR(CD.CUSTOMER_NUMBER) AS ACCOUNT_NUMBER,\n       CD.CUSTOMER_NAME,\n       BD.BRANCH_NAME,\n       BD.BRANCH_CITY,\n       ACHD.CNS_REP_AREA_NAME AS MARKET_BY_AREA,\n       ACHD.DIVISION_NAME,\n       ACHD.REGION_NAME\n  FROM PROD_EDW.ENT.CUSTOMER_DIM CD\n INNER JOIN  PROD_EDW.ENT.BRANCH_DIM BD\n    ON CD.BRANCH_ID = BD.BRANCH_ID\n   AND CD.DW_ACTIVE_FLAG = 'Y'\n   AND CD.DW_DATA_SOURCE_KEY = 1\n   AND BD.DW_ACTIVE_FLAG = 'Y'\n INNER JOIN PROD_EDW.ENT.ACCOUNTING_UNIT_HIERARCHY_DIM ACHD\n    ON BD.ACCOUNTING_UNIT = ACHD.ACCOUNT_UNIT_CODE\n   AND ACHD.DW_ACTIVE_FLAG = 'Y'"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"6342117":{"id":6342117,"inputCardinality":"MANY","outputCardinality":"MANY","implementationID":-629958239,"x":192,"y":144,"width":32,"height":32,"inputConnectorIDs":[6342118,6342120],"outputConnectorIDs":[6342121],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"left join 2"}}}},"visible":true},"2":{"slot":2,"name":"Main Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"LDG_SNOW_BILL_REPORT_MARKET_SHARE"}}}},"visible":true},"3":{"slot":3,"name":"Main Table Alias","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"src1"}}}},"visible":true},"4":{"slot":4,"name":"Joins","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"EDW Branch Details"},"2":{"slot":2,"type":"STRING","value":"src2"},"3":{"slot":3,"type":"STRING","value":"Left"}}}},"visible":true},"5":{"slot":5,"name":"Join Expressions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"\"src1\".\"account_number\" = \"src2\".\"ACCOUNT_NUMBER\" AND\n(LEN(\"account_number\") <= 5 \n   AND (CONTAINS(upper(\"src1\".\"account_name\"),upper(\"src2\".\"CUSTOMER_NAME\")) = 'TRUE' \n         OR CONTAINS(upper(\"src2\".\"CUSTOMER_NAME\"),upper(\"src1\".\"account_name\")) = 'TRUE')\n    OR 1=1)"},"2":{"slot":2,"type":"STRING","value":"src1_Left_src2"}}}},"visible":true},"6":{"slot":6,"name":"Output Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"src1.sys_created_by"},"2":{"slot":2,"type":"STRING","value":"sys_created_by"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"src1.sys_created_on"},"2":{"slot":2,"type":"STRING","value":"sys_created_on"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"src1.sys_id"},"2":{"slot":2,"type":"STRING","value":"sys_id"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"src1.sys_tags"},"2":{"slot":2,"type":"STRING","value":"sys_tags"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"src1.total"},"2":{"slot":2,"type":"STRING","value":"total"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"src1.account_number"},"2":{"slot":2,"type":"STRING","value":"account_number"}}},"7":{"slot":7,"values":{"1":{"slot":1,"type":"STRING","value":"src1.account_name"},"2":{"slot":2,"type":"STRING","value":"account_name"}}},"8":{"slot":8,"values":{"1":{"slot":1,"type":"STRING","value":"src1.comp_aoa"},"2":{"slot":2,"type":"STRING","value":"comp_aoa"}}},"9":{"slot":9,"values":{"1":{"slot":1,"type":"STRING","value":"src1.u_mrkt_share_sys_id"},"2":{"slot":2,"type":"STRING","value":"u_mrkt_share_sys_id"}}},"10":{"slot":10,"values":{"1":{"slot":1,"type":"STRING","value":"src1.u_div"},"2":{"slot":2,"type":"STRING","value":"u_div"}}},"11":{"slot":11,"values":{"1":{"slot":1,"type":"STRING","value":"src1.eb_aoa_count"},"2":{"slot":2,"type":"STRING","value":"eb_aoa_count"}}},"12":{"slot":12,"values":{"1":{"slot":1,"type":"STRING","value":"src1.city"},"2":{"slot":2,"type":"STRING","value":"city"}}},"13":{"slot":13,"values":{"1":{"slot":1,"type":"STRING","value":"src1.region"},"2":{"slot":2,"type":"STRING","value":"region"}}},"14":{"slot":14,"values":{"1":{"slot":1,"type":"STRING","value":"src1.sys_updated_on"},"2":{"slot":2,"type":"STRING","value":"sys_updated_on"}}},"15":{"slot":15,"values":{"1":{"slot":1,"type":"STRING","value":"src1.market"},"2":{"slot":2,"type":"STRING","value":"market"}}},"16":{"slot":16,"values":{"1":{"slot":1,"type":"STRING","value":"src1.competitor_name"},"2":{"slot":2,"type":"STRING","value":"competitor_name"}}},"17":{"slot":17,"values":{"1":{"slot":1,"type":"STRING","value":"src1.sys_mod_count"},"2":{"slot":2,"type":"STRING","value":"sys_mod_count"}}},"18":{"slot":18,"values":{"1":{"slot":1,"type":"STRING","value":"src1.sys_updated_by"},"2":{"slot":2,"type":"STRING","value":"sys_updated_by"}}},"19":{"slot":19,"values":{"1":{"slot":1,"type":"STRING","value":"src1.competitor_aoa_count"},"2":{"slot":2,"type":"STRING","value":"competitor_aoa_count"}}},"20":{"slot":20,"values":{"1":{"slot":1,"type":"STRING","value":"src1.area"},"2":{"slot":2,"type":"STRING","value":"area"}}},"21":{"slot":21,"values":{"1":{"slot":1,"type":"STRING","value":"src1.account_type"},"2":{"slot":2,"type":"STRING","value":"account_type"}}},"22":{"slot":22,"values":{"1":{"slot":1,"type":"STRING","value":"src1.branch"},"2":{"slot":2,"type":"STRING","value":"branch"}}},"23":{"slot":23,"values":{"1":{"slot":1,"type":"STRING","value":"src2.ACCOUNT_NUMBER"},"2":{"slot":2,"type":"STRING","value":"ACCOUNT_NUMBER"}}},"24":{"slot":24,"values":{"1":{"slot":1,"type":"STRING","value":"src2.CUSTOMER_NAME"},"2":{"slot":2,"type":"STRING","value":"CUSTOMER_NAME"}}},"25":{"slot":25,"values":{"1":{"slot":1,"type":"STRING","value":"src2.BRANCH_NAME"},"2":{"slot":2,"type":"STRING","value":"BRANCH_NAME"}}},"26":{"slot":26,"values":{"1":{"slot":1,"type":"STRING","value":"src2.BRANCH_CITY"},"2":{"slot":2,"type":"STRING","value":"BRANCH_CITY"}}},"27":{"slot":27,"values":{"1":{"slot":1,"type":"STRING","value":"src2.MARKET_BY_AREA"},"2":{"slot":2,"type":"STRING","value":"MARKET_BY_AREA"}}},"28":{"slot":28,"values":{"1":{"slot":1,"type":"STRING","value":"src2.DIVISION_NAME"},"2":{"slot":2,"type":"STRING","value":"DIVISION_NAME"}}},"29":{"slot":29,"values":{"1":{"slot":1,"type":"STRING","value":"src2.REGION_NAME"},"2":{"slot":2,"type":"STRING","value":"REGION_NAME"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"}},"connectors":{"6342118":{"id":6342118,"sourceID":6342116,"targetID":6342117},"6342119":{"id":6342119,"sourceID":6342113,"targetID":6342114},"6342120":{"id":6342120,"sourceID":6342115,"targetID":6342117},"6342121":{"id":6342121,"sourceID":6342117,"targetID":6342113}},"notes":{},"noteConnectors":{},"variables":{},"grids":{}},"info":{"name":"jb_Market_Share_Branch_detail_Update","description":"","type":"TRANSFORMATION","tag":"56289566-57db-4c59-96d1-b5035dea2b35"}}